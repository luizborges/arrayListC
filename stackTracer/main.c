#include "stackTracer.h"



////////////////////////////////////////////////////////////////////////////////
// Test Functions Head
////////////////////////////////////////////////////////////////////////////////
void test1();
void test2();

////////////////////////////////////////////////////////////////////////////////
// Functions for test
////////////////////////////////////////////////////////////////////////////////
/* A dummy function to make the backtrace more interesting. */
int func1 (void){ return 1; }
int func2 (void){ return 2; }
int func3 (void){ return 3; }
int func4 (void){ return 4; }


////////////////////////////////////////////////////////////////////////////////
// Main
////////////////////////////////////////////////////////////////////////////////
int main (void) {
	printf("Ow my God.\n");
  StackTracer_Init();
//  test1();
  test2();
  return 1;
}

////////////////////////////////////////////////////////////////////////////////
// Test Functions Body
////////////////////////////////////////////////////////////////////////////////
void test1() {
	printf("*********************\n");
	printf("****** %s\n", __func__);
	printf("*********************\n");
	func1();
	func2();
	func3();
	func4();
	abort();
}

void test2() {
	printf("*********************\n");
	printf("****** %s\n", __func__);
	printf("*********************\n");
	_TL; func1();
	_TL; func2();
	_TL; abort();
	_TL; func3();
	_TL; func4();
}






